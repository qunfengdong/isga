<%args>
 $pipeline_builder
</%args>

<& /PipelineBuilder/overview.mas, pipeline_builder => $pipeline_builder &>
<sys:script type="text/javascript" src="/include/js/wz_jsgraphics.js"></sys:script>
<sys:script type="text/javascript" src="/include/js/mapper.js"></sys:script>
<sys:script type="text/javascript" src="/include/js/jquery.livequery.js"></sys:script>
<sys:script type="text/javascript" src="/include/js/jquery.qtip.min.js"></sys:script>
<sys:style type="text/css" media="screen">
  @import "/include/css/jquery.qtip.css";
</sys:style>

<sys:style type="text/css" media="screen">
  @import "/include/css/uni-form.css";
</sys:style>
<sys:style type="text/css" media="screen">
  @import "/include/css/workflow-modal.css";
</sys:style>



<sys:script type="text/javascript">
$(document).ready(modalUpdate);
function modalUpdate() {
  $('.modal').modal({hide_on_overlay_click:false});
}
</sys:script>

<sys:script type="text/javascript">
$(document).ready(modalclose);
function modalclose(){
$('input.cancel') 
    .livequery('click', function(event) { 
        $("#modal_content").remove();
        $("#modal_overlay").remove();
        return false; 
    });
}
</sys:script>

<sys:script type="text/javascript">
$(document).ready(wfUpdate);
function wfUpdate() {
$('a.toggleModule')
    .livequery('click', function(event) {
       $.ajax({
         url: "/submit/PipelineBuilder/EditWorkflow?pipeline_builder=<% $pipeline_builder %>&cluster="+this.id,
         success: function(html){
           $("#modal_content").remove();
           $("#modal_overlay").remove();
           window.location.reload();
         }
       }); 

    });
}
</sys:script>

<sys:script type="text/javascript">
$(document).ready(showActions);
function showActions() {
  $("area.cluster")
   .click(
     function(){  
    $("#JT").remove();
      $.ajax({
        url: "/PipelineBuilder/ChooseComponent?pipeline_builder=<% $pipeline_builder %>&cluster="+this.id,
        success: function(html){
          $('#modal_content').append(html);
        }
      });
      return false;
     });
  $("area.nolink")
   .click(function(){return false});
}
</sys:script>

<sys:script type="text/javascript">
$(document).ready(function() {
 $('area').each(function(){
   $(this).qtip({
    content: {
      text: 'Loading...',
      ajax: {
        url: $(this).attr('href'),
        type: 'GET',
        data: {}
      }
    },
    hide: {
      delay: 1000,
      fixed: true
    },
    style: {
        classes: 'ui-tooltip-tipped'
    },
    position: {
        my: 'left center',
        at: 'top right'
    },
    events: {
      show: function(event, api){
        $('.ui-tooltip').hide();
      }
    }
   });
 });
});
</sys:script>
