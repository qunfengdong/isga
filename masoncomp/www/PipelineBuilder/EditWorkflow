<%args> #! -*- cperl -*-
 $pipeline_builder
</%args>

<%perl>

my $builder = SysMicro::WorkflowBuilder->new( $pipeline_builder );
$SysMicro::Session->{ "PipelineBuilderWorkflow$pipeline_builder" } = $builder;

</%perl>

<& /PipelineBuilder/edit_workflow.mas, 
   pipeline_builder => $pipeline_builder,
   builder => $builder &>


<sys:script type="text/javascript" src="/include/js/wz_jsgraphics.js"></sys:script>
<sys:script type="text/javascript" src="/include/js/mapper.js"></sys:script>
<sys:script type="text/javascript" src="/include/js/jtip.js"></sys:script>
<sys:style type="text/css" media="screen">
  @import "/include/css/jtip.css";
</sys:style>

<sys:script type="text/javascript">
$(document).ready(wfUpdate);

function wfUpdate() {

  $("area.cluster")
   .hover( 
	 function(){
	 JT_area_show(this.href,this.id,this.name,this.coords)},
	 function(){$('#JT').remove();
      })
   .click(
     function(){
      $("#JT").remove();
      $("#workflow").empty();
      $("#workflow").load("/PipelineBuilder/UpdateWorkflow?pipeline_builder=<% $pipeline_builder %>&click="+this.id, 
                 wfUpdate);
      return false;
     });
}

</sys:script>
